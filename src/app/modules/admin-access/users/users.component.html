<div class="animated-table-container bg-white p-3">
  <div class="header">
    <div class="left">
      <h5 class="text-start">User Details List</h5>
    </div>

    <div class="right">
      <div class="search_filter">
        <app-search-filter
          [borderRequired]="true"
          [placeholder]="'Search here..'"
          [formControl]="searchVal"
        >
        </app-search-filter>
      </div>
      <form [formGroup]="userForm">
        <app-single-select
          formControlName="roleName"
          [placeholder]="'Select Role'"
          [optionList]="['User', 'Admin']"
        >
        </app-single-select>
      </form>
    </div>
  </div>

  <div class="table-container">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-primary">
        <tr>
          <th>ID</th>
          <th>User Name</th>
          <th>Name</th>
          <th>Email</th>
          <th>Phone Number</th>
          <th>Role</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        @if (userData.length > 0) { @for (item of userData; track $index) {
        <tr>
          <td>{{ item.userId }}</td>
          <td>{{ item.username }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.email }}</td>
          <td>{{ item.phoneNumber }}</td>
          <td>{{ item.roleName }}</td>
          <td>
            <div class="d-flex gap-2">
              <button
                class="btn btn-primary btn-sm"
                (click)="onEditUserByID(updateUser, item)"
              >
                Edit User
              </button>
              <button class="btn btn-danger btn-sm">Delete User</button>
            </div>
          </td>
        </tr>
        } }@else {
        <tr class="no_data_found_row">
          <td colspan="7" class="text-center no_data_found">No User found</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<!-- Modal Template -->
<ng-template #updateUser>
  <div class="modal-header">
    <h4 class="modal-title">Edit User</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="onCancel()"
    ></button>
  </div>

  <form [formGroup]="userForm" (ngSubmit)="onUpdtateUser()">
    <div class="modal-body">
      <div class="mb-3">
        <label>User Name</label>
        <input
          readonly
          type="text"
          class="form-control"
          formControlName="username"
        />
      </div>

      <div class="mb-3">
        <label>Name</label>
        <input
          readonly
          type="text"
          class="form-control"
          formControlName="name"
        />
      </div>

      <div class="mb-3">
        <label>Email</label>
        <input
          readonly
          type="email"
          class="form-control"
          formControlName="email"
        />
      </div>

      <div class="mb-3">
        <label>Phone</label>
        <input
          readonly
          type="text"
          class="form-control"
          formControlName="phoneNumber"
        />
      </div>

      <div class="mb-3">
        <label>Role</label>
        <input type="text" class="form-control" formControlName="roleName" />
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">
        Cancel
      </button>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="userForm.invalid"
      >
        Update User
      </button>
    </div>
  </form>
</ng-template>
